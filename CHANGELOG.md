# Changelog

All notable changes to Terminal Velocity will be documented in this file.

The format is based on [Keep a Changelog](https://keepachangelog.com/en/1.0.0/),
and this project adheres to [Semantic Versioning](https://semver.org/spec/v2.0.0.html).

## [Unreleased]

### Added (2025-11-15 - Roadmap Features Implementation)
- **Social Features System (Phase 9)**:
  - **Friends System**:
    - Friend request workflow (send, accept, reject)
    - Friend list management with online status tracking
    - Block system for preventing unwanted interactions
    - Privacy controls and friendship validation
  - **Mail System**:
    - Player-to-player messaging with attachments
    - Credit and item attachments with escrow safety
    - Mail templates for common messages
    - Unread tracking and bulk operations
    - Block integration (blocked players cannot send mail)
  - **Notifications System**:
    - 9 notification types: friend requests, mail, PvP challenges, trade offers, faction invites, achievements, bounties, territory alerts, system announcements
    - Real-time notification delivery with callbacks
    - Configurable expiration times (friend requests: 7 days, mail: 3 days, etc.)
    - Auto-dismissal of old notifications
    - Notification templates and formatting
  - **Social TUI Screens**:
    - Friends screen with 4 tabs: friends list, friend requests, blocked players, add friend
    - Notifications screen with filtering by type and read/unread status
    - Color-coded notifications by importance (friend requests: cyan, mail: green, PvP: red)
    - Interactive actions: accept/reject requests, view details, dismiss notifications
  - **Enhanced Chat Commands**:
    - `/whisper` (`/w`, `/msg`, `/tell`) - Private messaging
    - `/who` (`/online`) - List online players with locations
    - `/roll` (`/dice`) - Dice rolling with notation (1d6, 2d10+5, etc.)
    - `/me` (`/emote`) - Emote actions
    - `/ignore` (`/block`) - Block players
    - `/unignore` (`/unblock`) - Unblock players
    - `/help` - Command reference
  - **Database Schema**:
    - friends table with bidirectional relationships
    - friend_requests table with expiration tracking
    - blocks table with reason logging
    - mail table with attachments and read status
    - notifications table with type-specific data
    - 17 strategic indexes for performance
    - 4 SQL helper functions for common operations

- **Ship Capture System (Phase 12)**:
  - Classic Escape Velocity boarding mechanics
  - Two-stage capture process:
    1. Board enemy ship (30s duration, crew-based success chance)
    2. Capture ship after successful boarding
  - Disable requirements: target must be <25% hull, <10% shields
  - Crew-based calculations:
    - Base boarding chance: 40%
    - +5% per crew member
    - Ship size modifiers
  - Casualty system: 15-40% crew losses on both sides
  - Capture success calculation:
    - Base capture chance: 50%
    - Modified by hull damage
    - Modified by crew differential
  - Captured ship set to 50% hull after takeover
  - Cooldown system: 60s between attempts
  - Thread-safe operation tracking
  - Background resolution with time-based outcomes

- **Mining & Salvage System (Phase 15)**:
  - **Resource Types** (12 total):
    - Ore: iron, copper, titanium, platinum, gold
    - Special: crystals, rare earth, deuterium
    - Salvage: scrap metal, components, weapons, outfits
  - **Target Types**:
    - Asteroids (30% spawn chance, 1-3 per system)
    - Derelicts (10% spawn chance, salvageable ships)
    - Debris Fields (15% spawn chance, battle remnants)
  - **Rarity System**:
    - Common: Basic resources (iron, copper, scrap)
    - Uncommon: Advanced materials (titanium, gold, components)
    - Rare: Precious resources (platinum, crystals, rare earth, weapons)
    - Legendary: (future expansion)
  - **Mining Mechanics**:
    - Cycle-based extraction (15s per cycle, 1-10 cycles total)
    - Mining laser bonus: +25% yield per level
    - Cargo scanner bonus: +15% yield
    - Proportional resource extraction
    - Depletion tracking
  - **Derelict Salvage**:
    - Salvage weapons from uncommon+ derelicts
    - Salvage outfits from rare derelicts
    - Variable salvage amounts based on rarity
  - **Scanner Integration**:
    - Cargo scanner reveals hidden resources
    - 50% chance to reveal extra target with scanner
  - **Operation Management**:
    - Thread-safe active operation tracking
    - Background cycle processing
    - Auto-cleanup after 60s
    - Cancelable operations
    - Statistics tracking

- **Player Marketplace (Phase 10)**:
  - **Auction House**:
    - Time-based auction system (1h - 7 days configurable)
    - Four auction types: ships, outfits, commodities, special items
    - Minimum bid increments (5% default)
    - Instant buyout option (150% premium default)
    - Auction fees (5% of final sale to house)
    - Bid history tracking with timestamps
    - Automatic expiry and completion
    - Credit escrow during bidding
    - Refund system for outbid players
    - Seller payouts minus fees
  - **Contract System**:
    - Four contract types: courier, assassination, escort, bounty hunt
    - Player-posted contracts with deposit requirements
    - Contract claiming and completion workflow
    - Failure penalties (10% of reward)
    - Maximum 3 active contracts per player
    - 48-hour expiry with automatic refunds
    - Deposit = reward + posting cost (1000cr default)
    - Contract validation and reward distribution
  - **Bounty System**:
    - Player bounties with expiration tracking
    - Minimum bounty: 5000 credits
    - Posting fee: 10% of bounty amount
    - Maximum 5 bounties per player
    - 72-hour expiry with automatic refund
    - Automatic claim on target kill
    - Multiple bounties stack
    - Claim window: 5 minutes after kill
  - **Marketplace TUI**:
    - Main menu with 9 marketplace options
    - Browse auctions with filtering and sorting
    - Create auction form (ships, items, commodities)
    - Browse contracts by type
    - Post contract with target specification
    - View active bounties with target info
    - Post bounty on any player
    - Detailed views for all item types
    - Pagination for large lists (10 items per page)
    - Time remaining displays with auto-formatting
    - Bid history viewing
    - Color-coded bounties (red for danger)
  - **Background Workers**:
    - Automatic expiry processing (1-minute ticker)
    - Auction completion and seller payouts
    - Contract expiry and refunds
    - Bounty expiry and refunds
    - Thread-safe operation management
  - **Callbacks & Events**:
    - onAuctionComplete callback
    - onContractClaimed callback
    - onBountyClaimed callback
    - Real-time event notifications
    - Statistics tracking

- **Fleet Management System (Phase 11)**:
  - **Multi-Ship Ownership**:
    - Own up to 5 ships simultaneously
    - Fleet roster with ship status tracking
    - Transfer between ships with inventory management
    - Ship storage and maintenance tracking
  - **Escort System**:
    - Up to 2 AI-controlled escort ships
    - Four formation types: defensive, offensive, trade, patrol
    - Escort AI with formation positioning
    - Combat assistance and flanking bonuses
    - Automatic target prioritization
  - **Fleet Operations**:
    - Coordinated fleet jumps
    - Fleet combat with tactical bonuses
    - Resource sharing (fuel, repairs)
    - Formation bonuses: +10% damage (offensive), +10% defense (defensive)
  - **Loyalty System**:
    - Escort loyalty 0-100% affects performance
    - Daily loyalty decay (5% per day)
    - Boost loyalty with payment (1000cr = +10%)
    - Low loyalty risks desertion (<20%)
  - **Maintenance & Costs**:
    - Daily maintenance per ship (100-1000cr based on size)
    - Docking fees scale with fleet size
    - Fuel costs for entire fleet
  - **Fleet TUI Screen**:
    - Fleet roster with 8 ship details per entry
    - Transfer cargo/credits between ships
    - Assign/dismiss escorts with formation selection
    - Boost escort loyalty with credit payments
    - Real-time status updates
  - **Background Workers**:
    - Daily maintenance cost deduction
    - Loyalty decay processing
    - Desertion checks and fleet cleanup
    - Thread-safe fleet operations

- **Alliance & Diplomacy System (Phase 13)**:
  - **Alliance System**:
    - Form alliances between 2-5 factions
    - Alliance-wide chat and coordination
    - Shared territory defense
    - Alliance treasury with contributions
    - Leader consensus voting (majority rule)
    - Alliance benefits: trade bonuses, mutual defense
  - **War System**:
    - Declare war between factions/alliances
    - War exhaustion system (0-100%)
    - Daily exhaustion gain: 5% + 0.1% per battle
    - Peace at 80% exhaustion
    - Territory capture during warfare
    - War reparations on peace (10% of losing faction treasury)
  - **Treaty System**:
    - Four treaty types: trade agreement, non-aggression pact, mutual defense, research sharing
    - Treaty durations: 7-90 days configurable
    - Trade agreements: +20% trade profits
    - Research sharing: +25% research speed
    - Treaty violations and reputation penalties
    - Automatic renewal option
  - **Diplomatic Relations**:
    - Faction relations: -1.0 (hostile) to +1.0 (allied)
    - Relation modifiers from actions
    - Reputation impact: trade, combat, missions
    - Diplomatic incidents tracking
  - **Background Workers**:
    - Daily war exhaustion updates
    - Treaty expiration monitoring
    - Alliance maintenance
    - Relation decay over time
    - Peace negotiation triggers
  - **Statistics & Tracking**:
    - Wars won/lost per faction
    - Alliance membership history
    - Active treaties count
    - Diplomatic incidents log

- **Advanced Ship Systems (Phase 16)**:
  - **Cloaking System**:
    - Stealth cloaking with energy consumption
    - Duration: Up to 5 minutes per activation
    - Energy drain: 5.0 units/second
    - Detection risk: 5% base, +5% per hostile in system
    - Cooldown: 60 seconds between activations
    - Cannot fire weapons while cloaked
    - Auto-deactivation on energy depletion
  - **Jump Drive System**:
    - Advanced FTL for distant jumps
    - Jump range: 100 light years
    - Charge time: 10 seconds
    - Fuel cost: 20 units per jump
    - No jump lane restrictions
    - Emergency jump capability
    - Cannot jump while in combat
  - **Wormhole System**:
    - Four wormhole types: stable, unstable, temporal, quantum
    - Discoverable wormhole network
    - Stability system: 0.0-1.0, decays 10% daily
    - Stable wormholes: 1.0 stability, permanent
    - Unstable: 0.3-0.7 stability, 30 days lifespan
    - Temporal: 0.5-0.9 stability, random exits, 14 days
    - Quantum: 0.6-1.0 stability, multi-exit, 7 days
    - Collapse chance based on stability
    - Discovery rewards and reputation
  - **System Management**:
    - Thread-safe cloak status tracking
    - Active jump operation monitoring
    - Wormhole network maintenance
    - Background stability decay
    - Daily wormhole cleanup
    - Energy validation and cooldowns

- **Manufacturing System (Phase 17)**:
  - **Blueprint System**:
    - Craft weapons, outfits, ship components, consumables
    - 5 rarity tiers (common to legendary)
    - Blueprint learning from loot/purchase
    - Resource requirements per blueprint
    - Crafting time: 30s - 4 hours
    - Skill level requirements (1-10)
  - **Technology Tree**:
    - 7 tech categories: weapons, defense, engines, sensors, manufacturing, trade, exploration
    - 5 levels per technology
    - Research system with time and credit costs
    - Research queue (max 3 simultaneous)
    - Prerequisites and tech dependencies
    - Tech benefits: +10-50% per level
  - **Crafting Operations**:
    - Batch crafting support
    - Queue management (max 5 active)
    - Cancellation with partial refund (50%)
    - Success chance based on skill
    - Quality variations (90-110% stats)
    - Critical success: +20% stats (5% chance)
  - **Player Stations**:
    - Build up to 3 personal stations
    - Construction cost: 1M - 10M credits
    - Build time: 7-30 days
    - Station types: trading post, factory, research lab, shipyard
    - Production bonuses per station type
    - Passive income generation
    - Upgradeable station modules
  - **Background Workers**:
    - Crafting operation completion
    - Research progress tracking
    - Station construction monitoring
    - Daily production cycles
    - Tech unlock notifications
    - Queue management and cleanup

- **Enhanced PvP Arena System (Phase 18)**:
  - **Arena System**:
    - 5 arena maps with unique layouts
    - Map features: asteroids, debris, stations
    - Environmental hazards
    - Strategic positioning bonuses
  - **Match Types**:
    - 6 match types: duel (1v1), team deathmatch (3v3), free-for-all (up to 8), king of the hill, capture the flag, elimination
    - Configurable match rules
    - Team balancing system
    - Match duration: 5-30 minutes
    - Custom scoring systems per type
  - **Spectator Mode**:
    - Watch ongoing matches
    - Up to 50 spectators per match
    - Multiple camera angles
    - Real-time score tracking
    - Replay system (future)
  - **Tournament System**:
    - Four tournament types: single elimination, double elimination, round robin, swiss
    - Entry fees and prize pools
    - Bracket management
    - Seeding based on ELO rating
    - Tournament progression tracking
    - Automated scheduling
  - **Ranking System**:
    - ELO rating system (1000 base)
    - K-factor: 32 for rating adjustments
    - 7 tiers: Bronze, Silver, Gold, Platinum, Diamond, Master, Grandmaster
    - 5 divisions per tier
    - Win streaks and loss protection
    - Seasonal rank resets
    - Top 500 leaderboard
  - **Match Management**:
    - Matchmaking by ELO ±200
    - Queue system with role preferences
    - Anti-cheat validation
    - Match history tracking
    - Statistics per match type
    - Background match processing

- **Quality of Life Improvements (Phase 19)**:
  - **Waypoint System**:
    - Create up to 20 custom waypoints
    - Named waypoints with descriptions
    - Category organization
    - Waypoint sharing with faction
    - Distance calculations
    - Route planning with multiple waypoints
    - Quick jump to waypoint
  - **Auto-Trading**:
    - Configure automated trade routes
    - Profit threshold filtering (minimum profit)
    - Route optimization
    - Background trade execution
    - Trade statistics tracking
    - Pause/resume functionality
    - Daily profit reports
  - **Quick Commands**:
    - User-defined command shortcuts
    - Up to 10 custom commands
    - Macro support (multiple actions)
    - Command aliases
    - Hotkey bindings
  - **Notification Preferences**:
    - Granular notification controls
    - 9 notification channels
    - Priority filtering (low/medium/high)
    - Sound preferences (future)
    - Email notifications (future)
    - Do Not Disturb mode
  - **Auto-Save Enhancements**:
    - Configurable save intervals (30s - 10min)
    - Manual save command
    - Save state indicators
    - Cloud backup support (future)
  - **UI Customization**:
    - Extended color scheme options
    - Font size adjustments (future)
    - Layout preferences
    - Screen transition animations
    - Compact mode for small terminals
  - **Background Systems**:
    - Auto-trader execution
    - Waypoint validation
    - Command macro processing
    - Preference persistence

- **Shared Faction Content (Phase 14)**:
  - **Faction Mission System**:
    - 6 mission types: cooperative, competitive, defensive, expansion, resource gathering, enemy elimination
    - Shared objectives for faction members
    - Max 5 active missions per faction
    - Configurable duration (1-168 hours)
    - Member contribution tracking
    - Progress aggregation across all participants
    - Automatic completion and rewards
  - **Faction Event System**:
    - 6 event types: boss raid, territory war, trade convoy, resource rush, siege defense, expedition
    - Max 3 active events simultaneously
    - Event leaderboards (top 10)
    - Prize pool distribution
    - Participation rewards
    - Scheduled event calendar
    - Global event announcements
  - **Shared Objectives**:
    - Cooperative objective tracking
    - Contributor attribution
    - Progress percentage per player
    - Objective types: eliminate, collect, deliver, defend, explore
    - Real-time progress updates
  - **Faction Rank System**:
    - 10 rank levels: Recruit (1) → Legend (10)
    - Point-based progression
    - Rank titles and privileges
    - Reward multipliers (1.0x - 2.5x)
    - Rank requirements increase per level
    - Automatic rank advancement
  - **Reward Distribution**:
    - Contribution-based rewards
    - Rank multiplier bonuses
    - Automatic credit distribution
    - Item rewards for top contributors
    - Reputation bonuses
  - **Background Workers**:
    - Daily mission maintenance
    - Event scheduling and completion
    - Rank progression updates
    - Reward distribution processing
    - Expired content cleanup

- **Launch Preparation Tools (Phase 20)**:
  - **Test Data Generation**:
    - Generate test players (up to 1000)
    - Generate test systems (up to 500)
    - Generate test factions (up to 50)
    - Configurable test data prefix
    - Automatic cleanup functionality
    - Bulk data creation for load testing
  - **Performance Monitoring**:
    - Real-time metrics collection (10s interval)
    - CPU usage tracking
    - Memory usage monitoring (2GB threshold)
    - Goroutine count tracking
    - Database connection pool metrics
    - Query performance analysis (1s threshold)
    - Automated performance recommendations
  - **Health Checks**:
    - Database connectivity verification (5s timeout)
    - Memory usage health (80% warning, 100% critical)
    - Connection pool saturation (70% warning, 90% critical)
    - Automated health check interval (60s)
    - Health status: healthy/warning/critical
    - Response time tracking
    - Detailed health reports
  - **Load Testing**:
    - Simulate 10-500 concurrent players
    - Configurable test duration (10 minutes default)
    - Request tracking and analysis
    - Response time percentiles
    - Error rate calculation
    - Bottleneck identification
    - Performance recommendations
    - Peak resource usage tracking
  - **Optimization Recommendations**:
    - Category-based recommendations (database, code, config, hardware)
    - Priority levels (critical, high, medium, low)
    - Impact and effort estimates
    - Automated recommendation generation
    - Status tracking (pending, in_progress, completed, dismissed)
  - **Launch Readiness Checklist**:
    - 16-item comprehensive checklist
    - 5 categories: infrastructure, testing, security, documentation, community
    - Required vs optional items
    - Completion tracking with timestamps
    - Launch readiness score (0.0-1.0)
    - 80% weight for required items
    - 20% weight for optional items
  - **Diagnostic Exports**:
    - Comprehensive JSON diagnostic reports
    - All system metrics included
    - Health check results
    - Performance recommendations
    - Checklist status
    - Launch readiness assessment
  - **Database Optimization**:
    - Index verification
    - Query performance analysis
    - Missing index detection
    - Optimization recommendations
  - **Backup Testing**:
    - Backup verification procedures
    - Restore validation
    - Data integrity checks
    - Automated backup testing

**ROADMAP COMPLETE**: All 14 phases fully implemented
- Phase 9: Social Features ✓
- Phase 10: Player Marketplace ✓
- Phase 11: Fleet Management ✓
- Phase 12: Ship Capture ✓
- Phase 13: Alliance & Diplomacy ✓
- Phase 14: Shared Faction Content ✓
- Phase 15: Mining & Salvage ✓
- Phase 16: Advanced Ship Systems ✓
- Phase 17: Manufacturing ✓
- Phase 18: Enhanced PvP (Arenas) ✓
- Phase 19: Quality of Life ✓
- Phase 20: Launch Preparation ✓

Total new features: 12 complete systems with 17 new files (~10,000 lines of code)

### Fixed (2025-11-15 - Comprehensive Bug Fix Release)
- **Critical Security Fixes**:
  - Fixed 6 money duplication exploits in trading operations (buy/sell commodity, buy/sell ship, buy/sell outfit)
  - All trading operations now use atomic database transactions
  - Transaction rollback on any failure prevents partial state updates
  - Added panic recovery with proper rollback in transaction handler

- **Concurrency & Thread Safety Fixes** (15 bugs):
  - Fixed 5 race conditions in PvP Manager (modified state under read locks)
  - Added mutex protection to ChatHistory for thread-safe access
  - Fixed 2 Metrics map access after unlock bugs
  - Fixed Session Manager lock/unlock/lock anti-pattern (use-after-free prevention)
  - Fixed Presence Manager to return copies instead of unsafe pointers
  - All concurrent operations now properly synchronized

- **Resource Leak Fixes** (3 bugs):
  - Added WaitGroup to Rate Limiter for graceful shutdown
  - Added WaitGroup to Security Session Manager cleanup goroutine
  - Added WaitGroup to Metrics HTTP Server for proper termination
  - All background goroutines now tracked and cleanly terminated

- **Nil Pointer Dereference Fixes** (4 bugs):
  - Fixed Factions Manager faction lookup with existence check
  - Fixed Trade Routes Calculator system map access (2 locations)
  - Fixed Session Manager cleanup nil pointer access
  - Fixed Tutorial Manager progress map access
  - All map accesses now validated before dereferencing

- **Input Validation & Security Fixes** (30+ bugs):
  - Fixed array bounds bug in help.go preventing negative index access
  - Added input length limits to registration (email: 254 chars, password: 128 chars)
  - Added control character filtering to registration and chat input
  - Fixed password validation in accounts CLI tool to match TUI validation
  - Prevents memory exhaustion from unlimited input buffers
  - Prevents ANSI escape code injection attacks

- **Error Handling Improvements** (4 bugs):
  - Added error checking to database Close() operations
  - Added error checking to SSH connection Close() in defer
  - Added error checking to SSH channel Close() in PlayerSession
  - All Close() errors now logged for debugging

- **Build Fixes**:
  - Added missing fmt import to traderoutes/calculator.go
  - Replaced non-existent Ship methods with json.Marshal() for serialization
  - Added encoding/json import to api/server/server.go

**Impact**: 61 total bugs fixed across 6 categories. Significantly improved security, stability, and code quality.

**Commits**:
- Database transactions and initial race conditions
- Additional race conditions and goroutine leaks
- More goroutine leaks and error handling
- Nil pointer dereference fixes
- Input validation fixes
- Error handling for Close() operations
- Build error fixes

### Added (2025-11-15 - Enhanced Observability & Documentation)
- **Enhanced Metrics System**:
  - Production-grade observability with latency histograms
  - LatencyHistogram: Track p50/p95/p99 percentiles for operations
  - ErrorCounter: Categorize errors with recent history tracking (last 100 errors)
  - RateCounter: Track events per time window (trades/min, combat/min, etc.)
  - Convenience functions: RecordDatabaseQuery(), RecordTradeOperation(), RecordCombatOperation()
  - New HTTP endpoints:
    - `/stats/enhanced`: Latency percentiles and error tracking with HTML dashboard
    - `/stats/performance`: Detailed profiling with color-coded health indicators
  - Support for custom operation tracking

- **Comprehensive Health Checks**:
  - Enhanced `/health` endpoint with service status (healthy/degraded/unhealthy)
  - Returns HTTP 503 for unhealthy status (load balancer integration)
  - Comprehensive metrics: error rate, database latency (p99), cache hit rate
  - Active connections and player counts
  - RFC3339 timestamps for monitoring systems
  - Status thresholds:
    - Degraded: error rate > 1%, DB p99 > 500ms, cache < 50%
    - Unhealthy: error rate > 5%, DB p99 > 2s

- **Documentation Improvements**:
  - Updated README with "Recent Updates" section highlighting 61 bug fixes
  - Documented new observability endpoints with usage examples
  - Added comprehensive code comments to complex functions:
    - GetPercentiles: Detailed percentile calculation explanation with examples
    - WithTransaction: ACID guarantees and exploit prevention documentation
    - DecideAction (Combat AI): Full tactical decision system documentation
  - Links to security audit and bug fix documentation
  - Showcases production-ready improvements

- **Database Performance**:
  - 17 strategic performance indexes (documented in previous section)
  - Expected 10-100x performance improvement on hot query paths

- **Regression Testing**:
  - 15+ regression tests ensuring bug fixes don't regress (documented in previous section)

### Added
- **Enhanced TUI Screens Integration (Phase 8, Polish & Testing)**:
  - **Combat Loot System Integration**:
    - Post-victory loot generation using combat.GenerateLoot()
    - Cargo space validation before loot collection
    - Loot UI overlay showing credits, cargo, weapons, and rare items
    - Interactive loot collection with [C]ollect or [L]eave options
    - Async loot generation and collection commands
    - Automatic credit updates after loot collection
    - combatLootGeneratedMsg and combatLootCollectedMsg message types
  - **Multi-Channel Chat System Integration**:
    - Global chat: Broadcast to all online players
    - System chat: Players in current system using presenceManager.GetPlayersInSystem()
    - Faction chat: Faction members using factionManager.GetFaction()
    - DM chat: Direct messages to targeted player ships with player ID mapping
    - Complete recipient ID extraction for each channel type
    - Error handling for invalid DM targets (planets, NPCs)
  - **Mission Board Enhancements**:
    - Ship type validation before mission acceptance
    - Proper ShipType loading using models.GetShipTypeByID()
    - Cargo space and combat rating validation
    - Error messages for missing ship types
  - **Space View Data Loading**:
    - Real system, planet, and ship data from repositories
    - loadSpaceViewDataCmd() for async data loading
    - convertShipsToSpaceObjects() helper for positioning
    - convertPlanetsToSpaceObjects() helper for planet display
    - Integration with presenceManager for nearby ships
    - Player ship tracking with owner IDs for DM chat
  - **Hailing and Dialogue System**:
    - Multi-target hailing system (planets, players, NPCs)
    - Context-sensitive responses based on target type
    - Attitude-based NPC responses (hostile, neutral, friendly)
    - Random dialogue generation for immersion
  - **Enhanced Screens with Real Data**:
    - Navigation screen: Real fuel data from currentShip.Fuel
    - Trading screen: Cargo space from ShipType.CargoSpace
    - Shipyard screen: Trade-in value calculation (70% of original price)
    - All screens use models.GetShipTypeByID() for specifications
  - **Trading Screen Critical Features**:
    - Cargo space validation before buying commodities
    - getCommodityID() helper for commodity name mapping
    - Max Buy functionality (M key): Calculate and buy maximum affordable quantity
    - Sell All functionality (A key): Sell entire commodity inventory
    - Pre-validation for cargo ownership before selling
    - Transaction rollback on database errors
    - Real-time cargo space calculation using Ship.GetCargoUsed()
  - **Progress Bar Enhancements**:
    - ShipType max values for accurate progress bars
    - Dynamic shield/hull/fuel max values from ship specifications
    - Percentage calculations using actual ShipType data
  - **Screen Navigation Improvements**:
    - Added 'o' key in SpaceView to open OutfitterEnhanced
    - Fixed OutfitterEnhanced ESC to return to SpaceView (was MainMenu)
    - Complete navigation flow: SpaceView ↔ OutfitterEnhanced
  - **Target Cycling Fixes**:
    - Added targetIndex field to targetSelectedMsg
    - Fixed cycleTargetCmd() to avoid model mutation in tea.Cmd
    - Proper target index calculation and wrapping
    - Update handler now sets targetIndex from message

### Fixed
- **Integration Test Failures**:
  - Fixed screen navigation tests (SpaceView ↔ OutfitterEnhanced)
  - Fixed space view targeting tests (target cycling and wrapping)
  - Fixed combat transition test (requires hasTarget=true)
  - All 17 integration tests now passing
  - All 56 TUI tests passing with 0 failures
- **Combat Screen Issues**:
  - Removed duplicate formatCredits() function
  - Combat loot now properly validates cargo space
  - Loot UI properly shows all loot types and controls
- **Trading Screen Issues**:
  - Added missing models import for ShipType loading
  - Fixed cargo space overflow when buying commodities
  - Fixed commodity ID mapping for database queries
  - Added pre-validation to prevent selling non-owned cargo
- **Navigation Screen Issues**:
  - Added missing models import for ShipType loading
  - Fixed fuel display to use actual ship fuel data
- **Message Flow Issues**:
  - Fixed target cycling to return targetIndex in message
  - Removed model mutation in tea.Cmd functions (pass by value)

- **Dynamic Events & Server Events System (Phase 7, Content)**:
  - Comprehensive server-wide event system with time-based scheduling
  - 10 event types:
    - Trading competitions
    - Combat challenges
    - Racing events
    - Resource scavenging
    - System invasions
    - Peaceful festivals
    - PvP tournaments
    - Exploration expeditions
    - Boss encounters
    - Community goal events
  - Event lifecycle management:
    - Scheduled, Active, Ending, Ended, Cancelled states
    - Automatic event transitions based on timers
    - Duration-based events (1 hour to 24 hours)
    - Start/end time tracking
  - Participation system:
    - Player join/leave mechanics
    - Minimum level requirements
    - Maximum participant limits
    - Required player thresholds to start
    - Individual progress tracking
    - Community goal contributions
  - Event objectives:
    - Individual objectives (per-player targets)
    - Community objectives (server-wide goals)
    - Progress tracking with current/required counts
    - Multiple objectives per event
  - Comprehensive reward system:
    - Credits and experience rewards
    - Item rewards
    - Reputation gains
    - Special titles
    - Achievement badges
    - Exclusive items/ships
    - Progress milestone rewards (25%, 50%, 75%)
    - Leaderboard-based rewards (top N players)
  - Event modifiers:
    - Credits multiplier (1.5x-2.0x)
    - Experience multiplier (1.5x-2.0x)
    - Drop rate multiplier (2.0x)
    - Temporary bonuses during events
  - Event leaderboard system:
    - Real-time score tracking
    - Player rankings
    - Top N display
    - Automatic rank updates
    - Completion status tracking
  - Event notifications:
    - Event starting alerts
    - Event active notifications
    - Event ending warnings (5 minute countdown)
    - Event complete announcements
    - Reward ready notifications
    - Rank change updates
  - Pre-defined events:
    - Trade Route Challenge (2 hours, 1.5x credits)
    - Galactic Combat Tournament (3 hours, 32 player cap)
    - Deep Space Expedition (24 hours, community goal)
    - Void Leviathan boss encounter (1 hour, 2.0x drops)
    - Harvest Festival (12 hours, 2.0x credits/1.5x XP)
  - Background event scheduler:
    - Automatic event state transitions
    - Timer management
    - Participant notifications
    - Event cleanup
  - Thread-safe concurrent operations
  - Event statistics tracking (active, scheduled, ended, participations)
- **Quest & Storyline System (Phase 7, Content)**:
  - Comprehensive quest system with branching storylines
  - Quest types and categories:
    - Main storyline quests (The Void Threat storyline with 3 quests)
    - Side quests for additional content
    - Faction-specific quests
    - Daily repeatable quests
    - Quest chains with sequential progression
    - Hidden/secret quests
    - Special event quests
  - Quest objective types (12 types):
    - Deliver items to locations
    - Destroy/kill specific targets
    - Travel to destinations
    - Collect items or resources
    - Escort NPCs
    - Defend locations
    - Investigate areas
    - Talk to NPCs
    - Scan objects
    - Mine resources
    - Complete trades
    - Kill specific enemies
  - Quest progression features:
    - Optional objectives (not required for completion)
    - Hidden objectives (revealed during quest)
    - Progress tracking (current/required counts)
    - Objective completion states
    - Multi-objective quests with dependencies
  - Quest rewards system:
    - Credits and experience points
    - Items and equipment
    - Reputation gains with factions
    - Ship unlocks
    - Star system unlocks
    - Special unique rewards
  - Quest management:
    - Active quests tracking
    - Available quests based on prerequisites
    - Completed quest history
    - Quest abandonment system
    - Prerequisite quest chains
    - Quest time limits (optional)
    - Repeatable quest support
  - Branching quest system:
    - Dialogue choices with consequences
    - Multiple quest paths
    - Alternate endings
    - Next quest unlocking based on choices
    - Failure quests (quests triggered by failing others)
  - Quest UI with 4 views:
    - Active Quests: Track ongoing quests with progress
    - Available Quests: Browse and accept new quests
    - Completed Quests: Review finished quests
    - Quest Detail: View objectives, rewards, and lore
  - Quest UI features:
    - Tab navigation between quest views
    - Visual quest type icons (★ main, ○ side, ⚑ faction, etc.)
    - Progress percentage display
    - Objective completion checkmarks (○ incomplete, ✓ complete)
    - Quest level recommendations
    - Giver NPC information
    - Reward previews before acceptance
  - Storyline system:
    - Multi-quest storylines
    - Main story vs side stories
    - Storyline progress tracking
    - Sequential quest ordering
  - Pre-defined content:
    - "The Void Threat" main storyline (3 quests)
    - Merchant delivery side quest (repeatable)
    - Federation patrol faction quest
    - Ancient artifact hidden quest
    - Daily resource gathering quest
  - Thread-safe concurrent operations
  - Quest statistics tracking (active, completed, failed, abandoned)
- **Interactive Tutorial & Onboarding System (Phase 7, Content & Polish)**:
  - Comprehensive tutorial system for new player onboarding
  - Tutorial categories and progression:
    - Basics: Welcome, navigation, credits system (3 steps)
    - Trading: Market mechanics, buying/selling, price understanding (3 steps)
    - Navigation: Star map, jumping between systems (2 steps)
    - Ship Management: Shipyard, outfitting, cargo management (3 steps)
    - Combat: Encounters, fighting, strategy (3 steps)
    - Missions: Mission board, accepting, completing (3 steps)
    - Multiplayer: Players, chat, factions (3 steps, optional)
  - Tutorial features:
    - Step-by-step guided tutorials with clear objectives
    - Progressive hint system (3 hint levels per step)
    - Tutorial overlay system on active screens
    - Tutorial list view showing progress for all tutorials
    - Full-screen tutorial view with detailed instructions
    - Completion tracking with percentage progress
    - Step skipping and tutorial disabling options
    - Toggle tutorial overlay visibility (press T)
  - Tutorial progression:
    - Prerequisite system (tutorials unlock sequentially)
    - Auto-triggered tutorials on first actions
    - Context-aware tutorials based on current screen
    - Per-player tutorial progress tracking
    - Category-based progress tracking
    - Optional vs required tutorial distinction
  - Tutorial triggers:
    - First login: Welcome tutorial
    - First trade: Trading tutorial
    - First combat: Combat tutorial
    - First jump: Navigation tutorial
    - First mission: Missions tutorial
    - Screen enter: Context-specific tutorials
  - Tutorial UI:
    - Elegant bordered overlay design
    - Text wrapping for readable descriptions
    - Progress indicators (overall and per-category)
    - Visual completion icons (○ not started, ◐ in progress, ✓ complete)
    - Color-coded UI elements
    - Compact and non-intrusive overlay
  - Tutorial management:
    - 7 pre-defined tutorial sequences (20+ total steps)
    - Thread-safe concurrent operations
    - Per-player tutorial state persistence
    - Enable/disable tutorial system per player
    - Statistics tracking (completion %, steps completed/skipped)
    - Tutorial customization support
- **Server Administration & Monitoring System (Phase 7, Infrastructure & Polish)**:
  - Role-based admin system with granular permissions
  - Admin roles and hierarchy:
    - Player: Normal player (no admin privileges)
    - Moderator: Can kick, mute players, view sessions/metrics
    - Admin: Full server settings, ban management, economy control
    - SuperAdmin: Complete server control including shutdown/restart
  - Permission system with 20+ specific permissions:
    - Player management: kick, ban, mute, view/edit player data
    - Server management: settings, shutdown, restart, view logs, execute commands
    - Content management: edit economy, spawn items, edit systems/factions
    - Monitoring: view metrics, sessions, database stats
    - Communication: broadcast messages, view all chat
  - Moderation tools:
    - Player ban system with temporary or permanent bans
    - IP-based banning support
    - Ban expiration tracking
    - Player mute system with configurable durations
    - Automatic mute expiration
    - Active ban/mute management and removal
    - Protection against admins affecting other admins
  - Server metrics collection:
    - Real-time performance monitoring (CPU, memory, goroutines)
    - Player statistics (total, active, peak, new players)
    - Session metrics (active sessions, average time, commands)
    - Game activity (trades, combats, jumps, transactions)
    - Database health (connections, latency, errors)
    - Background metrics worker (10-second intervals)
  - Server settings management:
    - General: server name, MOTD, max players, tick rate
    - Economy: starting credits, multiplier, tax rate
    - Difficulty: combat difficulty, pirate frequency, price volatility
    - Rules: PvP enabled, permadeath mode, friendly fire
    - Limits: max ships per player, cargo space, credits
    - Timeouts: session timeout, autosave interval, cleanup interval
    - Features: encounters, factions, achievements, leaderboards toggles
  - Comprehensive audit logging:
    - All admin actions logged with timestamps
    - Action details: admin ID/name, target player, action type
    - Success/failure tracking with error messages
    - IP address logging for security
    - Searchable action history (10,000 action buffer)
    - Automatic log trimming to prevent memory bloat
  - Admin UI dashboard with 7 views:
    - Main menu: Quick access to all admin functions
    - Player management: View and manage online players
    - Ban management: View, create, and remove bans
    - Mute management: View, create, and remove mutes
    - Server metrics: Real-time performance and statistics
    - Server settings: Configure server parameters
    - Action log: View recent admin actions (last 20)
  - Thread-safe concurrent operations with RWMutex
  - Graceful shutdown with cleanup
  - Admin statistics (total admins, active bans/mutes, action count)
- **Session Management & Auto-Persistence System (Phase 7, Server Infrastructure)**:
  - Server-side session management for multiplayer gameplay
  - Automatic state persistence (no player-controlled saves)
  - Session tracking and monitoring:
    - Active player session tracking
    - Connection time and last activity timestamps
    - Per-session statistics (actions, commands, errors)
    - Current screen/state tracking
    - IP address logging for security
  - Auto-persistence features:
    - Automatic saving every 30 seconds for dirty state
    - Background autosave worker
    - Dirty state tracking (unsaved changes detection)
    - Graceful disconnect handling with final save
    - Last save timestamp tracking
  - Session lifecycle management:
    - Session creation on player connect
    - Activity updates on player actions
    - Command execution tracking
    - Error logging per session
    - Session termination with state preservation
  - Inactivity management:
    - Background cleanup worker
    - Configurable inactivity timeout (default: 15 minutes)
    - Automatic session cleanup for disconnected players
    - Final state save before cleanup
  - Session statistics:
    - Total and active session counts
    - Commands executed per session
    - Errors encountered tracking
    - Session duration calculation
    - Idle time monitoring
  - Configuration options:
    - Adjustable autosave interval (default: 30 seconds)
    - Configurable inactivity timeout
    - Enable/disable autosave toggle
    - Per-player session isolation
  - Database integration:
    - Automatic player state persistence
    - Ship state saving
    - Repository-based architecture
    - Context-aware operations for cancellation
  - Background workers:
    - Autosave worker (periodic state saving)
    - Cleanup worker (inactive session removal)
    - Graceful shutdown handling
    - WaitGroup synchronization for clean exits
  - Thread safety:
    - Sync.RWMutex for concurrent access
    - Safe session creation/deletion
    - Lock-free statistics gathering
    - Atomic state updates
  - Foundation for future features:
    - Session migration for server upgrades
    - Cross-server session transfer
    - Session replay/history
    - Player reconnection with state restoration
    - Admin tools for session management
    - Analytics and monitoring integration

- **Settings & Configuration System (Phase 7, Polish)**:
  - Comprehensive settings system with 6 categories:
    - Display: Visual appearance and UI customization
    - Audio: Sound effects and music controls (framework for future implementation)
    - Gameplay: Game behavior and difficulty settings
    - Controls: Keybinding configuration and input modes
    - Privacy: Visibility and social interaction settings
    - Notifications: Alert and message preferences
  - Display settings:
    - Color schemes (5 options): Default, Dark, Light, High Contrast, Colorblind-Friendly
    - Animation toggles for performance
    - Compact mode for smaller terminals
    - Tutorial tips toggle
    - Icon display toggle (emoji/unicode)
    - Terminal size preferences
  - Gameplay settings:
    - Auto-save configuration (on/off, interval)
    - Dangerous action confirmation
    - Damage number display in combat
    - Auto-pilot navigation hints
    - Pause on encounter
    - Fast travel (skip animations)
    - Tutorial mode toggle
    - Difficulty levels (Easy, Normal, Hard, Expert)
    - Permadeath mode toggle
  - Control settings:
    - Navigation keybindings (up/down/left/right)
    - Action keys (confirm, cancel, back, help)
    - Combat shortcuts (attack, defend, flee, use item)
    - Quick access keys (map, inventory, ship, chat)
    - Save/load shortcuts
    - Vim mode support
    - Emacs mode support
  - Privacy settings:
    - Online status visibility
    - Location sharing toggle
    - Ship info visibility
    - Trade request acceptance
    - PvP challenge acceptance
    - Party invite acceptance
    - Block list management
    - Friends list management
  - Notification settings:
    - Achievement unlock alerts
    - Level up notifications
    - Trade completion alerts
    - Combat log display
    - Player join/leave notifications
    - News update alerts
    - Random encounter notifications
    - System message display
    - Chat message alerts
    - Notification duration configuration
  - Settings manager:
    - Thread-safe settings storage
    - JSON file persistence (.config/terminal-velocity/)
    - Auto-save on changes
    - Import/export settings
    - Reset to defaults functionality
    - Per-player configuration
  - Settings UI:
    - Category-based navigation
    - Toggle-based editing for boolean values
    - Cycle-based selection for multi-option settings
    - Real-time preview of changes
    - Reset to defaults per category
    - Save confirmation
  - Social features integration:
    - Block player functionality
    - Friend list management
    - Permission checking (trade, PvP, party)
    - Privacy controls for multiplayer
  - Color scheme system:
    - 5 pre-defined color schemes
    - Colorblind-friendly palette
    - High contrast option for accessibility
    - Light/dark mode support
    - Custom color definitions per scheme
  - Foundation for future features:
    - Custom color scheme creation
    - Advanced keybinding editor
    - Macro system
    - UI layout customization
    - Accessibility options (text-to-speech, screen reader support)
    - Cloud settings sync

- **Advanced Ship Customization & Outfitting (Phase 7, Content)**:
  - Comprehensive equipment system with 6 slot types:
    - Weapon: Gun/missile hardpoints for offensive capabilities
    - Shield: Shield generators for defense
    - Engine: Propulsion systems for speed and maneuverability
    - Reactor: Power generation and energy storage
    - Utility: Cargo pods, fuel tanks, scanners, repair drones
    - Special: Experimental equipment (cloaking, advanced systems)
  - Equipment slot system:
    - Size-based slots (Small/Medium/Large/Capital)
    - Type-specific slot requirements
    - Equipment compatibility checking
    - Locked slots for essential systems
  - Equipment catalog with 16 items:
    - Weapons (4): Laser Cannon, Plasma Turret, Railgun, Missile Launcher
    - Shields (3): Basic, Advanced, Military-Grade
    - Engines (3): Ion Drive, Afterburner, Military Fusion Drive
    - Reactors (3): Fission, Fusion, Antimatter
    - Utilities (4): Cargo Pod, Fuel Tank, Advanced Scanner, Repair Drone
  - Equipment categories and stats:
    - Weapon stats: Damage, range, accuracy, cooldown, energy cost, shield penetration
    - Defense stats: Shield HP, regen rate, hull bonus, armor rating
    - Power stats: Energy output, storage capacity
    - Propulsion stats: Speed bonus, turn rate, afterburner boost
    - Utility stats: Cargo bonus, fuel bonus, scanner range, jump range
    - Special stats: Cloaking power, ECM strength, repair rate
  - Ship loadout system:
    - Save multiple loadouts per ship type
    - Clone and modify existing loadouts
    - Equipment slot management (install/uninstall)
    - Loadout validation (outfit space, requirements)
    - Combined stats calculation from all equipment
  - Outfitting manager:
    - Thread-safe equipment catalog
    - Player inventory system for owned equipment
    - Purchase/sell equipment (70% sell-back price)
    - Install/uninstall equipment in loadout slots
    - Loadout CRUD operations (create, load, save, delete)
    - Compatibility checking for equipment installation
  - Enhanced outfitter UI:
    - Equipment Browser: Browse by category (Weapons, Defense, Power, Propulsion, Utility)
    - Ship Slots: View and manage installed equipment
    - Loadouts: Create, save, and load ship configurations
    - Inventory: Manage owned equipment, sell unused items
    - Tab-based navigation for easy access
    - Real-time combined stats display
    - Equipment purchase/install workflow
  - Equipment metadata:
    - Tech level requirements
    - License requirements for military/experimental gear
    - Rarity tiers (common, uncommon, rare, military, experimental)
    - Faction-specific equipment
    - Outfit space costs
    - Price ranges (5K cr - 200K cr)
  - Loadout features:
    - Total cost calculation
    - Outfit space usage tracking
    - Required systems validation (reactor, engine)
    - Equipment bonus stacking
    - Loadout cloning for variations
  - Player inventory management:
    - Track owned equipment quantities
    - Purchase equipment from stations
    - Sell equipment for credits
    - Install from inventory to ship
    - Uninstall returns to inventory
  - Foundation for future features:
    - Ship-specific equipment bonuses
    - Set bonuses for matching equipment
    - Legendary/unique equipment drops
    - Equipment modification/upgrading
    - Equipment crafting system
    - Equipment wear and maintenance
    - Tech tree progression

- **Random Encounter System (Phase 7, Content)**:
  - Dynamic random encounters during space travel
  - 14 encounter types across 5 rarity tiers:
    - Common (50%): Pirates, Traders, Patrols, Distress Calls
    - Uncommon (30%): Convoys, Mercenaries, Scavengers
    - Rare (15%): Derelicts, Anomalies, Bounty Targets, Mystery Signals
    - Very Rare (5%): Ancient Artifacts, Space Leviathans
    - Legendary (1%): Ghost Ships
  - Encounter templates system:
    - Pre-defined encounter scenarios
    - Tech level requirements
    - Government type filtering
    - NPC ship types and difficulty levels
    - Reward ranges (credits, cargo, reputation)
    - Behavioral flags (hostile, combat required, can flee)
  - Encounter generation:
    - 20% base chance per jump
    - Rarity-based weighted selection
    - Context-sensitive spawning (tech level, location)
    - Randomized details (NPC names, levels, rewards)
    - Procedural cargo generation
  - Encounter types and scenarios:
    - Pirate Attack: Hostile combat, steal cargo
    - Friendly Trader: Buy/sell opportunities
    - System Patrol: Contraband scanning
    - Distress Call: Rescue missions with rewards
    - Trading Convoy: Bulk trading opportunities
    - Mercenary Offer: Hire combat support
    - Scavenger Ship: Discounted salvage equipment
    - Derelict Vessel: Abandoned ships with loot
    - Space Anomaly: Scientific investigation
    - Bounty Target: High-value wanted criminals
    - Mystery Signal: Unknown outcomes (risk/reward)
    - Ancient Artifact: Legendary alien technology
    - Space Leviathan: Massive creatures (boss fights)
    - Ghost Ship: Legendary encounters with unique rewards
  - Encounter manager:
    - Thread-safe encounter tracking
    - Automatic encounter generation
    - Resolution system with outcomes
    - History tracking per player
    - Cleanup of old encounters
  - Encounter outcomes:
    - Engaged: Player fought
    - Avoided: Player avoided
    - Fled: Player escaped
    - Helped: Player assisted
    - Ignored: Player passed by
    - Destroyed: Player won combat
  - Encounter history tracking:
    - Total encounters per player
    - Breakdown by type and rarity
    - Rarest encounter found
    - Engagement vs avoidance rate
    - Total rewards earned
    - Cargo looted tracking
  - Reward system:
    - Randomized credit rewards (500cr - 1M cr based on rarity)
    - Procedural cargo drops
    - Reputation changes (-20 to +500)
    - Special items from rare encounters
  - Statistics and progression:
    - Encounter count by type
    - Rarity distribution tracking
    - Engagement rate percentage
    - Total credits earned from encounters
    - Cargo found tracking
  - Foundation for future features:
    - Quest-based encounters
    - Player-triggered events
    - Seasonal special encounters
    - Story-driven encounters
    - Faction-specific encounters
    - Territory-based encounter rates
- **Help System & Interactive Tutorial (Phase 7, QoL)**:
  - Comprehensive help documentation system
  - Help topics covering all game systems:
    - Getting Started: First steps and basic gameplay
    - Navigation & Travel: Jumping, fuel, planets
    - Trading & Economics: Profitable routes, pricing factors
    - Combat System: Weapons, tactics, rewards
    - Ships & Equipment: All 11 ship classes, upgrades
    - Multiplayer Features: Factions, PvP, chat, trading
    - Keyboard Shortcuts: Complete reference guide
  - Interactive tutorial system:
    - 13-step guided tutorial for new players
    - Automatic progress tracking
    - Objectives with hints for each step
    - Tutorial covers: trading → navigation → upgrades → multiplayer
    - Skip option available
    - Progress percentage tracking
  - Quick Reference Card:
    - Condensed one-page game guide
    - All essential information at a glance
    - Key bindings summary
    - Profitable trading tips
    - Progression roadmap
  - Help UI with multiple views:
    - Topics list with icons
    - Scrollable content viewer
    - Tutorial progress display
    - Quick reference viewer
    - Navigation breadcrumbs
  - Topic organization:
    - 7 main topics
    - Subtopic linking
    - Context-specific key bindings
    - Searchable content
  - Tutorial objectives system:
    - Action-based progression
    - Automatic objective detection
    - Completion rewards (future)
    - Reset and skip functionality
  - Accessibility features:
    - Scroll support for long content
    - Clear navigation controls
    - Visual progress indicators
    - Consistent UI patterns
- **PvP Combat System with Bounties (Phase 6, Issue #33)**:
  - Complete player-versus-player combat system with consent mechanics
  - Combat challenge models:
    - 5 challenge types: Duel, Aggression, Bounty Hunt, Faction War, Defense
    - 6 status states: Pending, Accepted, Active, Declined, Expired, Complete
    - Wager system for stakes-based combat
    - Consent system (required for duels, optional for faction wars)
    - 5-minute expiration on pending challenges
    - Location tracking (system/planet requirements)
  - Bounty system:
    - Automatic bounties for aggressive players
    - Wanted levels (1-5 stars): Minor → Suspect → Wanted → Dangerous → Most Wanted
    - Crime tracking (kills, thefts, attacks, total value)
    - Bounty amounts scale with crimes
    - 7-day bounty expiration
    - Bounty claiming rewards for hunters
    - System-issued and faction-issued bounties
  - Combat statistics and progression:
    - Win/loss/draw record tracking
    - Combat rating (0-1000) with 7 tiers: Novice → Elite
    - Honor rating (0.0-1.0): Honorable → Villain
    - Kill/death ratio calculation
    - Win rate percentage
    - Type-specific tracking (duels, bounty hunts, pirate kills)
    - Aggression count and notoriety level
    - Win streak tracking (current and longest)
    - Total damage dealt/taken
    - Financial tracking (credits won/lost)
  - Combat results and resolution:
    - Detailed result recording (damage, credits, cargo)
    - Automatic bounty effects (added for aggression, claimed for hunts)
    - Reputation changes based on combat type
    - Combat duration tracking
    - Loot system for cargo capture
  - PvP manager with thread-safe operations:
    - Create/accept/decline/complete challenges
    - Bounty issuance and claiming
    - Stats tracking and leaderboard
    - Automatic challenge expiry cleanup
    - Combat result history
    - Player filtering (pending, all challenges)
  - PvP UI with multiple views:
    - Challenges tab: View sent/received challenges
    - Bounties tab: See active bounties and your wanted status
    - Stats tab: Personal statistics and leaderboard (top 10)
    - Create Challenge dialog: Set target, type, wager, message
    - Accept/Reject/Hunt controls
    - Time remaining countdown
    - Challenge type icons and status indicators
  - Combat mechanics:
    - Instant combat resolution (placeholder for full system)
    - Winner determination
    - Credit/cargo transfer
    - Honor and rating adjustments
    - Bounty consequence system
  - Foundation for future features:
    - Full turn-based combat system
    - Ship damage and destruction
    - Escape mechanics
    - Territory defense battles
    - Faction war campaigns
    - Piracy and cargo raiding
- **Player Trading System with Escrow (Phase 6, Issue #32)**:
  - Secure player-to-player trading with escrow protection
  - Trade offer models with comprehensive tracking:
    - Credit and cargo item exchanges
    - Trade status lifecycle (Pending → Accepted → Completed)
    - Expiration system (1-hour default, configurable)
    - Location requirements (same system/planet for trades)
    - Optional contract mode (cannot cancel after acceptance)
    - Message field for negotiations
  - Trade fairness assessment:
    - Automatic value calculation for offered/requested items
    - Fairness rating (Fair, Good Deal, Very Generous, etc.)
    - Value ratio display for transparency
    - Price per unit tracking for items
  - Escrow system:
    - Automatic locking of assets on acceptance
    - Holds credits and cargo during trade
    - Release on completion or cancellation
    - Prevents fraud and trade scamming
  - Trade history and reputation:
    - Track all completed trades per player
    - Success rate calculation (completion vs cancellation)
    - Total trade volume tracking
    - Trust score (0.0-1.0) based on behavior
    - Positive/negative rating system
    - Rating display: Excellent (⭐⭐⭐⭐⭐) to Untrusted (❌)
  - Trade manager with thread-safe operations:
    - Create trade offers with items and credits
    - Accept/reject/cancel offers with validation
    - Complete trades and release escrow
    - Automatic expiry cleanup
    - Player history management
    - Offer filtering (received, sent, all)
  - Trade UI with multiple views:
    - Received Offers tab: Pending trades awaiting response
    - Sent Offers tab: Track your outgoing proposals
    - History tab: View your trading reputation
    - Create Offer dialog: Specify recipient, amounts, message
    - Detail view: Full offer breakdown with fairness assessment
    - Trader reputation display on all offers
  - Controls and interactions:
    - Tab-based navigation (1-3 keys)
    - Accept/Reject/Cancel actions with confirmations
    - Create new offer (N key)
    - Credit adjustment with arrow keys
    - Time remaining countdown display
  - Foundation for future features:
    - Cargo item trading integration
    - Contract enforcement system
    - Trade notifications via chat
    - Faction trade benefits
    - Trade volume leaderboards
- **Territory Control System (Phase 6, Issue #31)**:
  - Comprehensive system claiming and ownership for factions
  - Territory models with detailed state tracking:
    - Control levels (Contested, Weak, Stable, Strong, Dominant)
    - Control points progression system
    - Weekly upkeep costs and passive income
    - Defense and development levels (0-5 each)
    - Faction station construction
    - Activity tracking (member visits, trade volume)
  - Upkeep and income calculations:
    - Base costs scale with development and defense
    - Stations add 5K weekly cost, 3K income
    - Income multipliers based on control level (0.5x-1.5x)
    - Trade volume provides 1% bonus to income
  - Territory benefits system:
    - Trade bonus (5% per development level)
    - Production bonus (3% per development level)
    - Defense rating boost (+10 per defense level)
    - Passive weekly income
    - Control level enhances all benefits
  - Territory manager with thread-safe operations:
    - Claim system (10K credit cost)
    - Abandon system
    - Pay weekly upkeep (7-day cycles)
    - Upgrade defense (costs: 5K, 10K, 15K, 20K, 25K)
    - Upgrade development (costs: 10K, 20K, 30K, 40K, 50K)
    - Build faction station (100K cost)
    - Activity tracking for control points
  - Control progression:
    - Automatic leveling based on control points
    - Maintenance activities add points
    - Required points: Weak(100), Stable(250), Strong(500), Dominant(1000)
  - Foundation for future features:
    - Territory defense mechanics
    - System contests and wars
    - Benefit application to member activities
    - Strategic resource control
- **Player Factions System (Phase 6, Issue #30)**:
  - Player-created organizations with full management system
  - Faction creation with name, tag (3-5 chars), and alignment selection
  - Five alignment types: trader, mercenary, explorer, pirate, corporate
  - Member management with role hierarchy:
    - Leader: Full permissions including settings and promotions
    - Officer: Can manage members and treasury
    - Member: Basic faction member
  - Faction treasury system:
    - Deposit/withdraw credits
    - Officer+ access for withdrawals
    - All members can contribute
  - Faction progression:
    - Level system (1-10) with experience points
    - Member limit increases with levels (starts at 10)
    - Leveling unlocks new capabilities
  - Recruitment settings:
    - Public/private recruitment toggle
    - Minimum combat rating requirement
    - Application approval system
  - Faction manager with thread-safe operations:
    - Create, join, leave factions
    - Promote/demote members
    - Kick members (with rank checks)
    - Treasury management
    - Settings configuration
  - Faction UI:
    - List view showing all factions with stats
    - Create faction dialog with input fields
    - My Faction view with member roster
    - Treasury and level display
    - Recruiting status indicators
  - Foundation for future features:
    - Territory control system
    - Faction wars and PvP
    - Faction reputation with NPC factions
    - Faction chat integration (ready)
    - Tax system for passive treasury growth
- **Communication System with Multi-Channel Chat (Phase 6, Issue #29)**:
  - Comprehensive multiplayer chat system with 6 channel types
  - Chat channels:
    - Global Chat: All online players can communicate
    - System Chat: Players in the same star system
    - Faction Chat: Private faction member communication
    - Direct Messages: Private 1-on-1 conversations
    - Trade Channel: Trading and deals
    - Combat Log: Combat notifications and events
  - ChatMessage model with full metadata:
    - Sender information and timestamps
    - Channel routing
    - System vs player messages
    - Recipient tracking for DMs
    - Context (system ID, faction ID)
  - Chat manager with message routing:
    - Send to global, system, faction, or direct channels
    - Per-player chat history (100 messages per channel)
    - Recent message retention
    - Automatic history trimming
    - Thread-safe operations
  - Interactive chat UI:
    - Tab-based channel navigation (1-5 keyboard shortcuts)
    - Input mode for typing messages (I or Enter)
    - Message scrolling (↑/↓ keys)
    - Formatted message display with timestamps
    - Color-coded messages (system, self, others)
    - Channel-specific empty states
    - Scroll pagination for long histories
  - Chat commands:
    - /help - Show available commands
    - /dm <username> <message> - Send direct message
    - /clear - Clear current channel
    - /me <action> - Send action message
  - Integration with presence system:
    - System chat uses presence to find players in same system
    - Player online status affects message delivery
  - Foundation for future features:
    - Faction chat ready for faction system
    - DM infrastructure for player trading negotiations
    - Combat log for PvP notifications
- **Player Presence and Visibility System (Phase 6, Issue #28)**:
  - Real-time player presence tracking for multiplayer visibility
  - PlayerPresence model tracking:
    - Online/offline status with last seen timestamps
    - Current system and planet location
    - Ship information (name and type)
    - Current activity status (idle, trading, combat, navigating, etc.)
    - Combat status and docked status
    - Idle duration and AFK detection (5min threshold)
    - Criminal status display
  - Presence manager with thread-safe operations:
    - Connect/disconnect handling
    - Activity updates (11 activity types)
    - Location tracking
    - Ship information updates
    - Heartbeat system for keepalive
    - Stale session cleanup (15min timeout)
  - Players UI with multiple views:
    - All online players view
    - Same system filter
    - Nearby players (same system, not AFK)
    - In combat filter
    - Four sort modes (name, rating, online time, activity)
    - Player statistics dashboard (combat, trading, docked, in space, AFK)
  - Automatic presence initialization on player login
  - Activity status indicators with emojis
  - Online duration tracking and display
  - Player interaction capability checking
  - Foundation for multiplayer features (chat, PvP, trading)
- **Leaderboards System (Phase 5, Issue #27)**:
  - Comprehensive competitive ranking system across 7 categories
  - Category leaderboards:
    - Overall Rankings: Weighted composite of all stats
    - Combat Masters: Based on kills and combat rating
    - Trade Moguls: Based on profit and trade volume
    - Explorers: Based on systems visited and jumps
    - Wealthiest: Based on current credits
    - Mission Experts: Based on completions vs failures
    - Most Reputable: Based on positive faction relationships
  - Scoring formulas with balanced weighting
  - Real-time ranking calculations with automatic sorting
  - Top 3 medal display (🥇🥈🥉)
  - Two view modes:
    - Global view: Top 15 players
    - Near-player view: Shows rankings around your position
  - Tab-based category navigation (1-7 keyboard shortcuts)
  - Player highlight in leaderboard listings
  - Detailed stats display per category
  - Manual refresh support (R key)
  - Leaderboard manager for efficient ranking updates
  - Category-specific icons and display names
  - Score formatting based on category type
- **Cargo Delivery Missions (Phase 5, Issue #21 partial)**:
  - Automatic cargo loading on mission acceptance
  - Cargo space validation before accepting delivery missions
  - Delivery validation at destination planets
  - Mission completion with automatic cargo removal
  - Credit and reputation reward application
  - CheckMissionProgress() integration with player location
  - Mission progress check command (C key) in mission board
- **Bounty Hunting Missions (Phase 5, Issue #22)**:
  - Bounty target registration system
  - RegisterBountyKill() for combat kill tracking
  - Automatic bounty mission progress updates
  - Bounty completion verification
  - Bounty reward payment on target elimination
  - GetBountyTargets() for active bounty display
  - IsBountyTarget() for target validation
  - Bounty target cleanup on mission completion
  - Support for multi-target bounty missions
  - Progress messages for partial bounty completion
- **News and Events System (Phase 5, Issue #26)**:
  - Dynamic news generation based on player actions
  - 8 news categories (Combat, Economic, Political, Exploration, Military, Criminal, General, Achievement)
  - 4 priority levels (Low, Medium, High, Critical)
  - Event-based article generation:
    - Combat news for significant battles (3+ enemies)
    - Trade news for large transactions (10K+ credits)
    - Achievement news for rare/epic/legendary unlocks
    - Faction relation news
    - Random universe events
  - News UI with filtering and detail view
  - Category-based filtering (6 categories)
  - Age tracking ("Just now", "2 hours ago", etc.)
  - Priority icons (📰 Low, 📢 Medium, ⚠️ High, 🚨 Critical)
  - Player action indicators (⭐ Your Action)
  - Automatic news expiration (6-48 hours based on priority)
  - Breaking news detection
  - Initial news generation on game start
  - Article word wrapping for readability
- **Random Encounter System (Phase 5, Issue #25)**:
  - 8 encounter types with unique mechanics
  - Encounter types: Pirate, Trader, Distress, Police, Faction Patrol, Derelict, Merchant, Asteroid
  - Probability-based encounter generation (10% base chance, scales with danger)
  - Dynamic encounter difficulty based on system danger level (1-10)
  - Player status influence (criminals get more police encounters)
  - Multiple response options per encounter
  - Encounter-specific ships with appropriate equipment
  - Combat integration (hostile encounters trigger combat)
  - Trade opportunities with independent traders
  - Rescue missions with reputation rewards
  - Police scans and criminal detection
  - Faction relationship checks
  - Salvage mechanics for derelict ships
  - Flee success calculation based on ship stats
  - Automatic exploration tracking (jump recording)
  - Achievement checks after jumps
- **Achievement System (Phase 5, Issue #24)**:
  - 25 predefined achievements across 7 categories
  - Achievement categories: Combat, Trading, Exploration, Missions, Wealth, Ships, Special
  - 5 rarity tiers: Common, Uncommon, Rare, Epic, Legendary
  - Achievement point system (10-200 points per achievement)
  - Automatic unlock detection based on player stats
  - Progress tracking toward locked achievements (0-100%)
  - Hidden achievements for special accomplishments
  - Achievement UI with filtering and sorting
  - Tab-based navigation (All/Unlocked/Locked/Category filters)
  - Visual progress bars for locked achievements
  - Real-time unlock notifications in combat and trading
  - Integration with progression system
  - Achievement manager for tracking unlocks
  - GetRecentUnlocks() for displaying latest achievements
- **Player Progression System (Phase 5, Issue #23)**:
  - Combat rating calculation (0-100 scale with sqrt diminishing returns)
  - Trading rating calculation (profit-based with volume multiplier)
  - Exploration rating calculation (systems and jumps tracking)
  - 8-tier combat rank system (Harmless to Elite)
  - 8-tier trading rank system (Peddler to Tycoon)
  - 8-tier exploration rank system (Tourist to Pathfinder)
  - Overall rank calculation with weighted average (10 tiers)
  - RecordTrade() helper for automatic trading stats tracking
  - RecordKill() helper for automatic combat stats tracking
  - RecordSystemVisit() helper for exploration tracking
  - RecordJump() helper for jump tracking
  - RecordMissionCompletion() and RecordMissionFailure() helpers
  - Highest profit tracking for trading achievements
  - GetCombatRankTitle(), GetTradingRankTitle(), GetExplorationRankTitle()
  - GetOverallRank() for combined progression display
  - **Integration with gameplay systems**:
    - Combat system now tracks kills automatically
    - Trading system records all transactions with profit tracking
    - Mission system tracks completions and failures
    - Rank updates displayed on milestone achievements
    - Combat rating shown in combat log every 10 points
    - Trading rank shown in trading UI every 10 points

- **Production Infrastructure (Phase 8+, Operations & Monitoring)**:
  - **Observability & Monitoring System** (`internal/metrics/`):
    - Prometheus-compatible metrics endpoint at `/metrics` (port 8080)
    - Human-readable HTML stats dashboard at `/stats`
    - Health check endpoint at `/health`
    - Comprehensive metric tracking:
      - Connection metrics (total, active, failed, duration)
      - Player metrics (active, logins, registrations, peak players)
      - Game activity (trades, combat, missions, quests, jumps, cargo)
      - Economy (total credits, market volume, 24h trade volume)
      - System performance (database queries/errors, cache hit rate, uptime)
    - Thread-safe atomic counters and gauges
    - Automatic database query instrumentation
    - 24-hour rolling counters with automatic reset
    - HTTP metrics server with graceful shutdown
  - **Automated Backup System** (`scripts/`):
    - `backup.sh`: Automated PostgreSQL backup with compression
    - `restore.sh`: Safe database restore with verification
    - Retention policies (days and count limits)
    - Automatic cleanup of old backups
    - Progress tracking for large databases
    - Confirmation prompts for destructive operations
    - Support for both compressed and uncompressed backups
    - `crontab.example`: Example cron jobs for scheduled backups
    - Multiple backup strategies (hourly, daily, weekly, monthly)
  - **Rate Limiting & Security** (`internal/ratelimit/`):
    - Connection rate limiting (5 concurrent per IP, 20/minute)
    - Authentication rate limiting (5 failures = 15min lockout)
    - Automatic IP banning (20 failures = 24h ban)
    - Brute force protection with per-IP tracking
    - Configurable thresholds and durations
    - Automatic cleanup of old entries
    - Manual ban/unban commands for admins
    - Integrated into SSH authentication flow
    - Failed login tracking across password and public key auth
  - **Trade Route Calculator & Navigation Planner** (`internal/traderoutes/`, `internal/tui/traderoutes.go`):
    - Advanced route optimization using Dijkstra's algorithm for pathfinding
    - Profit calculations: per unit, per jump, ROI percentage, and total profit
    - Three operation modes:
      - Best Routes Globally: Find most profitable routes across all systems
      - From Current System: Find routes starting from player's current location
      - Navigation Plan: Plot multi-jump route to selected destination
    - Interactive TUI screen with keyboard navigation (up/down, 1/2/3 mode switch)
    - Route comparison with sortable columns (From, To, Commodity, Prices, Profit, Jumps, ROI)
    - Detailed route information display with full statistics
    - Navigation waypoint display with jump-by-jump breakdown
    - Fuel requirement calculation for planned routes
    - Integration with player ship cargo capacity for profit estimation
    - Tech level-based price estimation using existing pricing modifiers
    - Government legality checking (filters illegal commodities per faction)
    - Accessible from game screen via [R] key
    - Top 50 route limit for performance
  - **Player Mail System** (`internal/mail/`, `internal/tui/mail.go`, `internal/database/mail_repository.go`):
    - Complete player-to-player mail system with asynchronous messaging
    - Four operation modes:
      - Inbox: View received messages with unread count
      - Sent: View sent messages
      - Compose: Create new messages with recipient, subject, and body
      - Read: View message details with reply support
    - Interactive TUI with keyboard navigation:
      - [1/2] Switch between Inbox and Sent folders
      - [C] Compose new message
      - [↑/↓] Navigate message list
      - [Enter] Read selected message
      - [D] Delete message (soft delete)
      - [R] Reply to message (inbox only) or Refresh list
      - [Tab] Cycle through compose fields
      - [Ctrl+S] Send composed message
    - Unread message tracking with badge display
    - Soft delete system (persists until both parties delete)
    - Authorization checks (sender/recipient only)
    - Username lookup for addressing (no need to know UUIDs)
    - Message list pagination (50 messages per page)
    - Accessible from game screen via [M] key
    - Backend features:
      - Thread-safe mail manager with RWMutex
      - Unread count caching for performance
      - Automatic cleanup of old messages
      - Database indexes for inbox/sent/unread queries
      - Migration script (004_add_player_mail.sql)
  - **Ship Loadout Sharing & Comparison** (`internal/loadouts/`, `internal/database/loadout_repository.go`):
    - Complete system for sharing and comparing ship configurations
    - Backend features:
      - Share current ship loadout (public or private)
      - Automatic stats calculation (DPS, armor, shield, speed, cargo, energy, mass)
      - Browse public loadouts with filters (ship type, popularity)
      - Compare two loadouts side-by-side with difference analysis
      - Favorite/unfavorite system with counter tracking
      - View tracking with automatic increment
      - Apply loadout to player's ship (validates ship type match)
      - Export/import loadouts as JSON
    - Database schema:
      - shared_loadouts table with JSONB for weapons/outfits/stats
      - loadout_favorites junction table (many-to-many)
      - Indexes for player queries, public browsing, ship type filtering, and popularity
      - Cascade delete when player is deleted
    - Manager operations:
      - ShareLoadout(): Create new shared loadout from ship
      - GetLoadout(): Retrieve with access permission checks
      - GetPlayerLoadouts(): All loadouts by a player
      - GetPublicLoadouts(): Browse public loadouts (paginated)
      - GetPopularLoadouts(): Most viewed/favorited (sorted by algorithm)
      - UpdateLoadout()/DeleteLoadout(): Modify owned loadouts
      - FavoriteLoadout()/UnfavoriteLoadout(): Favorite management
      - GetFavorites(): Retrieve player's favorited loadouts
      - CompareLoadouts(): Side-by-side comparison with differences
      - ApplyLoadout(): Copy loadout to player's ship
      - ExportLoadout()/ImportLoadout(): JSON serialization
    - Stats calculated:
      - Total DPS from all weapons
      - Total armor (base + outfit bonuses)
      - Total shield (base + outfit bonuses)
      - Total speed (base + engine bonuses)
      - Total cargo (base + cargo expansion bonuses)
      - Energy usage from weapons
      - Mass usage from outfits
    - Thread-safe operations with RWMutex
    - Loadout caching for performance
    - Migration script (005_add_shared_loadouts.sql)
  - **Server Integration**:
    - Metrics server starts on port 8080 by default
    - Rate limiter enabled by default with sensible defaults
    - Graceful shutdown for all infrastructure components
    - Configuration via `server.Config` struct
    - Non-fatal initialization (server continues if metrics fail)

### Changed
- **Mission Manager (internal/missions/manager.go)**:
  - Version updated to 1.2.0
  - Added comprehensive file header documentation
  - Added detailed function comments with parameters and returns
  - Added bountyTargets map for kill tracking
  - Enhanced AcceptMission() to register bounty targets
  - Enhanced ApplyMissionRewards() to record mission completions
  - Updated FailMission() signature to accept player parameter
  - Added mission failure tracking with player progression
  - Updated all FailMission() calls to pass player parameter
- **Player Model (internal/models/player.go)**:
  - Version updated to 1.1.0
  - Added comprehensive package header documentation
  - Added progression tracking fields (trading, exploration, missions)
  - Enhanced NewPlayer() to initialize all progression fields
  - Added detailed function comments with parameters and returns
- **Combat UI (internal/tui/combat.go)**:
  - Integrated kill tracking with RecordKill() on enemy destruction
  - Added combat rating display in combat log on milestones
  - Shows rank title updates in combat messages
- **Trading UI (internal/tui/trading.go)**:
  - Integrated trade tracking with RecordTrade() on transactions
  - Added trading rank display on milestone achievements
  - Shows rank title and rating in trade completion messages
- **Mission UI (internal/tui/missions.go)**:
  - Updated mission abandonment to track failures
  - Added player parameter to FailMission() calls
- **Main Model (internal/tui/model.go)**:
  - Added achievement manager integration
  - Added ScreenAchievements to screen constants
  - Added achievementsUI and achievementManager fields
  - Added pendingAchievements queue for unlock notifications
  - Added checkAchievements() helper method
  - Added getAchievementNotification() and clearAchievementNotification()
  - Integrated achievements screen routing in Update() and View()
- **View Styles (internal/tui/views.go)**:
  - Added highlightStyle for emphasized text
  - Added successStyle for positive indicators
  - Added normalStyle for neutral text
- **Main Menu (internal/tui/main_menu.go)**:
  - Added Achievements menu item
- **Navigation System (internal/tui/navigation.go)**:
  - Added encounter generation after successful jumps
  - Added jump recording for exploration tracking
  - Added achievement checks after jumps
  - Integrated encounter probability system
- **Main Model (internal/tui/model.go)**:
  - Added news manager integration
  - Added ScreenNews constant
  - Added newsModel field
  - Enhanced checkAchievements() to generate news
  - Added InitializeNews() helper method
  - Integrated news screen routing
- **Main Menu (internal/tui/main_menu.go)**:
  - Added News menu item

### Added Files
- **News Model (internal/models/news.go)**:
  - NewsArticle and NewsEvent data structures
  - NewsCategory and NewsPriority enums
  - NewNewsArticle() with automatic expiration
  - GenerateCombatNews(), GenerateTradeNews(), GenerateAchievementNews()
  - GenerateFactionNews() and GenerateRandomNews()
  - IsExpired(), GetAgeString(), GetPriorityString()
  - 8 random event templates
- **News Manager (internal/news/manager.go)**:
  - Manager for news feed and article storage
  - AddArticle() and GetRecentArticles()
  - GetArticlesByPriority() and GetBreakingNews()
  - Event handlers: OnPlayerCombat(), OnPlayerTrade(), OnPlayerAchievement()
  - Automatic news expiration with pruneExpiredArticles()
  - Update() with random news generation (30min intervals)
  - GetPlayerNews() for action-based filtering
  - GenerateInitialNews() for game start
- **News UI (internal/tui/news.go)**:
  - Complete news screen with list and detail views
  - Category filtering (6 categories)
  - Article detail view with word wrapping
  - Priority and category badges
  - Age display and player action indicators
- **Encounter Model (internal/models/encounter.go)**:
  - Encounter data structures with 8 types
  - Encounter generation methods for each type
  - GetOptions() for dynamic option generation
  - CanAffordOption() for requirement checking
  - Ship name and weapon generation
- **Encounter Generator (internal/encounters/generator.go)**:
  - Probability-based encounter generation
  - Weighted encounter type selection
  - Dynamic difficulty scaling
  - Ship generation for encounters
  - Flee success calculation
- **Encounter UI (internal/tui/encounter.go)**:
  - Complete encounter screen
  - Option selection interface
  - Combat integration
  - Trade and reward handling
  - Status-based response logic
- **Achievement Model (internal/models/achievement.go)**:
  - Complete achievement data structures
  - 25 predefined achievements with criteria
  - IsUnlocked() and CalculateProgress() methods
  - Rarity color system
- **Achievement Manager (internal/achievements/manager.go)**:
  - Achievement tracking and unlock detection
  - Progress calculation
  - Filtering by category and status
  - Point calculation system
- **Achievement UI (internal/tui/achievements.go)**:
  - Complete achievements screen
  - Tab-based filtering
  - Progress bar rendering
  - Unlock status display

## [0.4.0] - 2025-01-07

### Added
- **Mission Framework (Phase 5, Issue #20)**:
  - Mission data structures with comprehensive fields
  - 6 mission types: delivery, combat, escort, bounty, exploration, trading
  - Mission status state machine (available, active, completed, failed)
  - Mission Manager for lifecycle management
  - GenerateMissions() with random mission generation
  - Mission generation for delivery, combat, bounty, and trading missions
  - AcceptMission() with requirements validation and cargo loading
  - DeclineMission() to remove unwanted missions
  - CompleteMission() to mark missions as finished
  - FailMission() for abandoned or expired missions
  - Active mission limit (5 concurrent missions max)
  - Mission requirements system (combat rating, faction reputation)
  - Deadline tracking with automatic expiration
  - Mission progress tracking with UpdateProgress()
  - IsExpired() and IsCompleted() status checks
  - Mission rewards system (credit rewards, reputation changes)
  - Mission Board UI with tab-based navigation
  - Mission details display with type icons, objectives, rewards
  - Requirements validation display (✓/✗ indicators)
  - Accept/decline mechanics with validation
  - Mission abandonment for active missions
  - UpdateMissions() for automatic expiration checks
  - CheckMissionProgress() for auto-completion
  - 10 mission display limit with scrolling
  - Word-wrap for long descriptions

## [0.1.0] - 2025-01-03

### Added
- **Enhanced Authentication System (Phase 1, Issue #2 partial)**:
  - SSH public key authentication support
  - Multi-method authentication (password + SSH keys simultaneously)
  - Email field for player accounts
  - SSH key repository with fingerprint tracking
  - Support for multiple SSH keys per account
  - SSH key management (add, remove, deactivate, track last used)
  - Password-optional accounts (SSH-key-only authentication)
  - Account management CLI tool (`accounts`)
  - Server configuration for auth methods and registration
  - Placeholder for interactive registration (coming soon)
- **Database Layer (Phase 1, Issue #1)**:
  - PostgreSQL connection management with pgx driver
  - Connection pooling with configurable limits
  - Transaction support with automatic rollback
  - Player repository (registration, authentication, CRUD, credits, reputation)
  - System repository (systems, planets, jump routes, bulk operations)
  - Migration runner for schema initialization
  - Integration tests for player repository
  - Server integration with database authentication
- Initial project structure and repository setup
- Comprehensive GitHub templates:
  - Bug report template with game state tracking
  - Feature request template
  - Enhancement template for roadmap items
  - Documentation template
  - Deployment/configuration template
  - Question/help template
  - Enhanced pull request template
  - Template configuration with helpful links
- Universe generation system:
  - Procedural system and planet generation
  - 6 NPC factions with territory distribution
  - MST-based jump route connectivity
  - Name generation system (Greek+Constellation, real stars, catalog numbers)
  - Comprehensive test coverage (100% connectivity verification)
- CLI tools:
  - `genmap` - Universe preview and statistics tool
- Data models:
  - Player (progression, credits, reputation)
  - Ship (types, cargo, weapons, outfits)
  - Universe (systems, planets, jump routes)
  - Factions (player and NPC factions)
  - Trading (commodities, market data)
  - Missions (framework for mission system)
  - NPC Factions (6 standard factions: UEF, ROM, FTG, FWA, Crimson, Auroran)
- Database schema:
  - PostgreSQL schema with 20+ tables
  - Player, ship, system, planet, faction tables
  - Trading and mission tables
  - Indexes and constraints
- SSH server:
  - Basic SSH server implementation
  - Database-backed authentication with bcrypt
  - Session handling with player tracking
  - Host key generation
  - Graceful shutdown support
  - Online status tracking
- Docker support:
  - Multi-stage Dockerfile
  - docker compose.yml with PostgreSQL and PgAdmin
  - .dockerignore optimization
  - .env.example template
  - Health checks and auto-initialization
- Documentation:
  - README.md with quickstart and features
  - ROADMAP.md with 8 development phases
  - UNIVERSE_DESIGN.md (galaxy structure and factions)
  - FACTION_RELATIONS.md (politics and conflicts)
  - DOCKER.md (comprehensive deployment guide)
  - IMPLEMENTATION_STATUS.md (development tracking)
  - CODE_OF_CONDUCT.md (Contributor Covenant v2.1)
  - SECURITY.md (vulnerability reporting)
  - CONTRIBUTING.md (contribution guidelines)
- GitHub project management:
  - 8 GitHub projects (one per development phase)
  - 41 issues organized by phase
  - 25+ labels (phase labels, category labels)
  - Issue and PR templates
- CI/CD:
  - GitHub Actions workflow for testing and building
  - Docker workflow for multi-platform builds (amd64, arm64)
  - Automated publishing to GitHub Container Registry
  - Branch protection rules
- Makefile with common development tasks
- Go module setup with dependencies
- **Trading System (Phase 2, Issue #7)**:
  - Interactive trading UI with market view
  - Buy/sell transactions with database persistence
  - Real-time market price updates based on supply/demand
  - Commodity filtering by tech level
  - Stock validation and credit checks
  - Transaction rollback on errors
- **Cargo Management (Phase 2, Issue #8)**:
  - Cargo hold visualization
  - Jettison functionality with quantity control
  - Real-time space calculations
  - Ship type integration
  - Sorted cargo display
- **Economy Balance (Phase 2, Issue #9)**:
  - Comprehensive ECONOMY_BALANCE.md documentation
  - 5 profitable trade routes with ROI analysis
  - Contraband price increases (20-50%)
  - Improved tech level modifiers (0.05 → 0.07)
  - Ship progression economics documented
## [0.2.0] - 2025-01-04

### Added
- **Ship Types (Phase 3, Issue #10)**:
  - 11 standard ship types (Shuttle to Battleship)
  - Complete stat definitions (combat, cargo, speed, etc.)
  - Combat rating requirements
  - Class-based progression system
- **Shipyard System (Phase 3, Issue #11)**:
  - Ship browsing with affordability checking
  - Purchase functionality with validation
  - Trade-in system (70% value)
  - Ship details viewer
  - Combat rating enforcement
  - Database persistence
- **Outfitter System (Phase 3, Issue #12)**:
  - 9 weapon types (laser, missile, plasma, railgun)
  - 15 outfit types (shields, hull, cargo, fuel, engines)
  - Tab-based navigation interface
  - Equipment installation with space validation
  - Equipment removal with 50% refund
  - Real-time ship stats with bonuses
  - Transaction safety with rollback
- **Ship Comparison Tools (Phase 3, Issue #13)**:
  - Side-by-side ship comparison view
  - Visual statistics bars for all stats
  - Cost-benefit analysis with trade-in calculations
  - Performance ratings (combat, trading, speed, overall)
  - Star-based rating display (0-10 stars)
  - Upgrade path recommendations
  - Value-per-credit analysis
  - Specific recommendations (combat vs trading focus)
- **Ship Management Screens (Phase 3, Issue #14)**:
  - Ship inventory view with all owned ships
  - Active ship indicator and selection
  - Ship switching functionality
  - Ship renaming with input validation
  - Configuration viewer (weapons, outfits, cargo)
  - Hull/shield/fuel status display
  - Maintenance status indicators
  - Comprehensive ship details view
## [0.3.0] - 2025-01-05

### Added
- **Weapon Systems (Phase 4, Issue #15)**:
  - Extended weapon model with combat mechanics
  - Weapon type differentiation (laser, missile, plasma, railgun)
  - Complete weapon stat definitions (damage, cooldown, energy, ammo, etc.)
  - Damage calculation system with shield/hull damage split
  - Range and accuracy systems with distance penalties
  - Ammo tracking for missile weapons (capacity and consumption)
  - Energy cost tracking for energy weapons
  - Weapon cooldown system (time between shots)
  - Shield penetration mechanics (railguns bypass shields)
  - Critical hit system (10% chance for 1.5x damage)
  - Hit chance calculation (accuracy, distance, evasion)
  - Projectile speed differentiation
  - DPS calculation utilities
  - Weapon state tracking (ammo, cooldowns, last fired turn)
  - Ammo reload functionality
- **Combat AI (Phase 4, Issue #16)**:
  - 5 AI difficulty levels (Easy, Medium, Hard, Expert, Ace)
  - Level-based attributes (aggression, accuracy, reaction time)
  - Intelligent target selection with threat assessment
  - Multi-factor targeting (hull/shield damage, threat level, distance)
  - Weapon usage strategies (range optimization, ammo conservation)
  - Shield penetration awareness in weapon selection
  - Strategic missile usage (save for weakened targets)
  - Evasion patterns based on ship condition
  - Retreat conditions with morale system
  - Level-dependent retreat thresholds
  - Formation flying framework
  - Position maintenance in formations
  - AI action priority system
  - Morale system (affected by hull damage)
  - Reaction time delays (0.25s-2.0s based on level)
  - Accuracy modifiers per difficulty level
- **Combat UI (Phase 4, Issue #17)**:
  - Full-screen tactical display with turn-based combat
  - Real-time ship status displays (hull/shields with percentage bars)
  - Target selection interface with hull/shield status
  - Weapon selection and control panel
  - Weapon status display (damage, range, cooldown, ammo)
  - Shield and armor indicators with visual bars
  - ASCII tactical radar (20x20 grid)
  - Radar zoom levels (1x-5x)
  - Enemy position tracking on radar (P=Player, E=Enemy, T=Target)
  - Combat log with scrolling messages (last 10 messages)
  - Turn number tracking
  - Player/enemy turn system
  - Fire weapon command (F key)
  - End turn command (E key)
  - Shield regeneration per turn
  - Weapon cooldown visualization
  - Ammo tracking display for missiles
  - Victory detection (all enemies destroyed)
  - Weapon firing with full damage integration
  - Target destruction and removal
  - Three viewing modes (tactical, target_select, weapons)
- **Reputation System (Phase 4, Issue #18)**:
  - ReputationChange tracking with faction cascade effects
  - 8 reputation event types (kill hostile/neutral/ally/civilian, defend, piracy, bounty)
  - CalculateCombatReputation() with multi-faction relationship system
  - Bounty system with expiration tracking
  - BountyInfo structure (amount, reason, expiration)
  - Legal status tracking (clean, offender, wanted, fugitive)
  - LegalStatus with crime count and severity tracking
  - Bounty amount calculation based on ship value and crime severity
  - Pay-off system (1.5x bounty cost for bribes)
  - Faction reinforcement logic based on reputation and territory
  - WillFactionsReinforce() with turn-based arrival system
  - Reinforcement strength calculation (1-5 ships based on patrol strength)
  - Reinforcement delay based on faction capabilities (2-5 turns)
  - Hostility level calculation (allied/friendly/neutral/unfriendly/hostile/at_war)
  - ApplyReputationChanges() with -100 to +100 clamping
  - Active bounty tracking across multiple factions
  - GetReputationChangeMessage() for player feedback
- **Loot and Salvage System (Phase 4, Issue #19)**:
  - LootDrop structure for combat rewards
  - GenerateLoot() with dynamic reward calculation
  - Ship destruction drop system (10-20% of ship value)
  - Cargo recovery mechanics (30-60% survival rate)
  - Outfit salvaging (40% chance per outfit)
  - Weapon salvaging (30-45% chance, higher for hostile ships)
  - Credit rewards including bounty payouts
  - Rare item drop system with 4 rarity tiers:
    - Legendary (5% chance): Ancient artifacts worth 250K
    - Epic (15% chance): Prototype components, neural processors (75-100K)
    - Rare (30% chance): Military plans, jump drive data (50-60K)
    - Uncommon (50% chance): Fusion cores (25K)
  - 6 standard rare items (artifacts, components, data, contraband)
  - Rarity-weighted drop system based on ship class and hostility
  - Cargo space calculation for loot
  - CanCarryLoot() validation before salvage
  - ApplyLoot() with automatic cargo integration
  - Salvage time calculation (2-5 turns based on loot complexity)
  - Total loot value tracking
  - Formatted loot summaries with credit shorthand (K/M)
  - SalvageSpecificItem() for targeted salvage attempts
- **Mission Framework (Phase 5, Issue #20)**:
  - Mission data structures with comprehensive fields
  - 6 mission types: delivery, combat, escort, bounty, exploration, trading
  - Mission status state machine (available, active, completed, failed)
  - Mission Manager for lifecycle management
  - GenerateMissions() with random mission generation
  - Mission generation for delivery, combat, bounty, and trading missions
  - AcceptMission() with requirements validation
  - DeclineMission() to remove unwanted missions
  - CompleteMission() to mark missions as finished
  - FailMission() for abandoned or expired missions
  - Active mission limit (5 concurrent missions max)
  - Mission requirements system:
    - Minimum combat rating checks
    - Faction reputation requirements
  - Deadline tracking with automatic expiration
  - Mission progress tracking with UpdateProgress()
  - IsExpired() and IsCompleted() status checks
  - Mission rewards system:
    - Credit rewards scaled by difficulty
    - Reputation changes with multiple factions
  - Mission Board UI with tab-based navigation:
    - Available missions tab
    - Active missions tab
    - Detailed mission view
  - Mission details display:
    - Type icon indicators (📦 delivery, ⚔️ combat, etc.)
    - Status indicators with color/symbols
    - Objectives and progress tracking
    - Rewards preview (credits and reputation)
    - Requirements validation display (✓/✗ indicators)
    - Deadline countdown (days/hours remaining)
  - Accept/decline mechanics with validation
  - Mission abandonment for active missions
  - UpdateMissions() for automatic expiration checks
  - CheckMissionProgress() for auto-completion
  - 10 mission display limit with scrolling
  - Word-wrap for long descriptions
  - Credit formatting (K/M shorthand)

### Changed
- Module path corrected from github.com/s0v3r1gn to github.com/JoshuaAFerguson
- Trading tech level modifier improved (0.05 → 0.07) for better balance
- Contraband prices increased for better risk/reward balance

### Deprecated
- N/A (initial release)

### Removed
- N/A (initial release)

### Fixed
- N/A (initial release)

### Security
- Non-root Docker container user
- Multi-stage Docker builds for minimal attack surface
- No hardcoded secrets in configuration
- Bcrypt password hashing support in models

## Release History

### [0.4.0] - 2025-01-07
- Mission system framework
- Phase 5: Missions & Progression (in progress - 25%)

### [0.3.0] - 2025-01-05
- Combat system complete
- Phase 4: Combat System (complete)

### [0.2.0] - 2025-01-04
- Ship progression complete
- Phase 3: Ship Progression (complete)

### [0.1.0] - 2025-01-03
- Foundation and economy
- Phase 1: Foundation & Navigation (complete)
- Phase 2: Core Economy (complete)

---

## Version Numbering

Terminal Velocity follows semantic versioning:
- **Major version** (X.0.0): Breaking changes, major new features
- **Minor version** (0.X.0): New features, backwards compatible
- **Patch version** (0.0.X): Bug fixes, minor improvements

## Development Phases

- **Phase 1**: Foundation & Navigation (in progress)
- **Phase 2**: Core Economy
- **Phase 3**: Ship Progression
- **Phase 4**: Combat System
- **Phase 5**: Missions & Progression
- **Phase 6**: Multiplayer Features
- **Phase 7**: Polish & Content
- **Phase 8**: Advanced Features

See [ROADMAP.md](ROADMAP.md) for detailed phase breakdowns.

## Links

- [GitHub Repository](https://github.com/JoshuaAFerguson/terminal-velocity)
- [Issue Tracker](https://github.com/JoshuaAFerguson/terminal-velocity/issues)
- [Project Boards](https://github.com/JoshuaAFerguson/terminal-velocity/projects)
- [Discussions](https://github.com/JoshuaAFerguson/terminal-velocity/discussions)

[Unreleased]: https://github.com/JoshuaAFerguson/terminal-velocity/compare/v0.4.0...HEAD
[0.4.0]: https://github.com/JoshuaAFerguson/terminal-velocity/compare/v0.3.0...v0.4.0
[0.3.0]: https://github.com/JoshuaAFerguson/terminal-velocity/compare/v0.2.0...v0.3.0
[0.2.0]: https://github.com/JoshuaAFerguson/terminal-velocity/compare/v0.1.0...v0.2.0
[0.1.0]: https://github.com/JoshuaAFerguson/terminal-velocity/releases/tag/v0.1.0
